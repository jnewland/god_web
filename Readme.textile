h2. Description

Sinatra web frontend for God

h2. Screenshots

"!http://farm3.static.flickr.com/2281/2505507050_2f8fc39795_m.jpg!":http://www.flickr.com/photos/jnewland/2505507050/
"!http://farm3.static.flickr.com/2420/2504730261_06ac1ba923_m.jpg!":http://www.flickr.com/photos/jnewland/2504730261/

h2. Requirements

* God
* Sinatra

h2. Install

<code>
<pre>
git clone git://github.com/jnewland/god_web.git
cd god_web
gem build god_web.gemspec
sudo gem install -l god_web-*.gem
</pre>
</code>

h2. Usage

@sudo god_web -p PORT_TO_RUN_ON -e production@

Optionally, you can password protect your god_web instance. To do so, create
a YAML config file with username and password keys, like so:

<code>
<pre>
username: foo
password: sekret
</pre>
</code>

Then provide that yaml file as the first argument to god_web:

@sudo god_web /path/to/god_web.yml -p PORT_TO_RUN_ON -e production@

You might want to monitor god_web to make sure it stays up:

<code>
<pre>
God.watch do |w|
  w.name              = "god_web"
  w.interval          = 1.minute
  w.start             = "sudo god_web -e prodction -p 8888"
  w.start_grace       = 10.seconds
  w.restart_grace     = 10.seconds

  w.start_if do |start|
    start.condition(:process_running) do |c|
      c.running = false
    end
  end

  w.restart_if do |restart|
    restart.condition(:memory_usage) do |c|
      c.above = 20.megabytes
      c.times = [3, 5]
    end

    restart.condition(:cpu_usage) do |c|
      c.above = 25.percent
      c.times = 5
    end
  end

  w.lifecycle do |on|
    on.condition(:flapping) do |c|
      c.to_state = [:start, :restart]
      c.times = 5
      c.within = 5.minute
      c.transition = :unmonitored
      c.retry_in = 10.minutes
      c.retry_times = 5
      c.retry_within = 2.hours
    end
  end
end
</pre>
</code>

h3. Author

"Jesse Newland":http://jnewland.com/

h3. License

"WTFPL":http://sam.zoy.org/wtfpl/